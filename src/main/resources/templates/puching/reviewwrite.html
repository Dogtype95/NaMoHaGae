<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!------------------------------------------------------------------------------------------------------------------------------>
    <!--스크립트 태그-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>                    <!--jQuery-->
    <script src="https://kit.fontawesome.com/a606a1a405.js" crossorigin="anonymous"></script>                   <!--FontAwesome-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>        <!--BootStrap-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>         <!--SweetAlert2-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>               <!--Toastr-->
    <!--CSS 링크-->
    <link rel="stylesheet" href="/css/main.css">                                                                <!--MainCSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <!--FontAwesome-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">      <!--BootStrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css">     <!--SweetAlert2-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">       <!--Toastr-->
    <!--기타 삽입-->

    <!------------------------------------------------------------------------------------------------------------------------------>
    <title>퍼칭 리뷰 작성페이지</title>
    <style>
        .rating {
            font-size: 30px;
        }
        .star {
            display: inline-block;
            cursor: pointer;
            color: gray;
        }
        .star.active {
            color: gold;
        }
        .review-form {
            margin-top: 20px;
        }
        .review-form textarea {
            width: 100%;
            height: 100px;
            resize: vertical;
        }
        .review-form button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
<header th:replace="~{/fragment/header.html}"> </header>
<main>
  <aside th:replace="~{/fragment/aside.html}">
  </aside>
  <section>

      <div class="rating">
          <span class="star" data-value="0.5">&#9733;</span>
          <span class="star" data-value="1.0">&#9733;</span>
          <span class="star" data-value="1.5">&#9733;</span>
          <span class="star" data-value="2.0">&#9733;</span>
          <span class="star" data-value="2.5">&#9733;</span>
      </div>

      <div class="review-form">
          <textarea id="review-text" placeholder="리뷰 작성 내용"></textarea>
          <button id="submit-review">리뷰 작성</button>
      </div>


      <script>
          const stars = document.querySelectorAll('.star');
          const reviewText = document.getElementById('review-text');
          const submitButton = document.getElementById('submit-review');

          stars.forEach(star => {
              star.addEventListener('click', () => {
                  const value = parseFloat(star.getAttribute('data-value'));

                  stars.forEach(star => {
                      const starValue = parseFloat(star.getAttribute('data-value'));
                      if (starValue <= value) {
                          star.classList.add('active');
                      } else {
                          star.classList.remove('active');
                      }
                  });
              });
          });

          submitButton.addEventListener('click', () => {
              const rating = Array.from(stars).filter(star => star.classList.contains('active')).length;
              const review = reviewText.value;

              // 여기에서 서버로 별점과 리뷰 내용을 전송하는 AJAX 요청을 추가하세요
              // 예를 들어, 서버 API '/api/v1/reviews'로 POST 요청을 보낼 수 있습니다

              // 전송 후에는 원하는 동작을 수행하세요
              alert('리뷰가 작성되었습니다!');
              reviewText.value = '';
              stars.forEach(star => star.classList.remove('active'));
          });
      </script>
  </section>
</main>
<footer th:replace="~{/fragment/footer.html}">
</footer>
</body>
</html>