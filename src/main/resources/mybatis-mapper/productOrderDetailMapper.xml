<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kro.namohagae.mall.dao.ProductOrderDetailDao">
    <!-- 주문 상세 저장 -->
    <insert id="save" parameterType="kr.kro.namohagae.mall.entity.ProductOrderDetail" useGeneratedKeys="true" keyProperty="productOrderDetailNo">
        insert into PRODUCT_ORDER_DETAIL (product_order_no,product_no,product_order_detail_count,product_order_detail_price,product_order_detail_review_enabled)
        values (#{productOrderNo},#{productNo},#{productOrderDetailCount},#{productOrderDetailPrice},#{productOrderDetailReviewEnabled})
    </insert>

    <!-- 내가 쓴 리뷰 -->
    <select id="findByOrderDetailNo">
        select * from PRODUCT_ORDER_DETAIL where product_order_detail_no=#{OrderDetailNo} and rownum=1
    </select>

    <!-- 리뷰 작성 완료 -->
    <update id="updateReview">
        update PRODUCT_ORDER_DETAIL set product_order_detail_review_enabled=0 where product_order_detail_no=#{OrderDetailNo}
    </update>
</mapper>