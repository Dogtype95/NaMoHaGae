<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kro.namohagae.mall.dao.ProductDao">
    <!--상품 정보 저장-->
    <insert id="save">
        <selectKey keyProperty="productNo" order="BEFORE" resultType="int">
            select product_seq_product_no.nextval from dual
        </selectKey>
        insert into PRODUCT(product_no,product_category_no,product_name,product_price,product_stock,product_grade,product_content,product_write_date)
        values(#{productNo},#{productCategoryNo},#{productName},#{productPrice},#{productStock},#{productGrade},#{productContent},#{productWriteDate})
    </insert>

    <!--특정 카테고리의 상품 개수를 조회-->
    <select id="count" resultType="java.lang.Integer" parameterType="String">
        select count(*) from PRODUCT p
        join PRODUCT_CATEGORY c on p.product_category_no = c.product_category_no
        where c.product_category_name = #{categoryName}
    </select>

    <!-- 상품 목록 조회 -->
    <select id="findAll" resultType="ProductDto.ReadAll" parameterType="map">
        select product_no, product_name, product_category_no, product_price, product_stock from PRODUCT
        where product_category_no = #{categoryNo}
        limit #{startRownum}, #{endRownum}
    </select>

    <!-- 상품 상세 보기 -->ㅣ
    <!-- 상품명으로 검색 -->
    <!-- 필터(최신순) 검색 -->
    <!-- 필터(판매량) 검색 -->
    <!-- 필터(이름순) 검색 -->
    <!-- 주문상품 정보 업데이트 -->
    <!-- 리뷰 업데이트 -->
    <!-- 큐엔에이 업데이트 -->


</mapper>